---
title: "03-3. 람다 활용3 : 람다 표현식 조합"
excerpt: "여러개의 람다 식을 조합해서 복잡한 람다 표현식을 만들 수 있다."
categories:
    - JAVA8
tags:
    - Lambda
last_modified_at: 2021-05-15
---

# 람다 표현식 조합
* 함수형 인터페이스는 여러개의 람다 표현식을 조합해서 복잡한 람다 표현식을 만들 수 있다.
    * **append, builder 형식으로 만들기 가능.**
* 함수형 인터페이스는 단 하나의 추상 메소드만 가져야 하는데, 어떻게 여러 메소드를 조합할 수 있을까?
* 여기서 등장하는 것이 [디폴트 메소드](!)이다.
    * 간략하게 설명하자면, **디폴트 메소드는 추상 메소드가 아니므로 함수형 인터페이스 조건에 위배되지 않는다.**
  
## 목차
* Comparator 조합
    * `reverse()`
* Predicate 조합
    * `negate()`
    * `add(), or()`
* Function 조합
    * `andThen()`
    * `compose()`

## Comparator 조합
### reverse()를 통한 역정렬
* `reverse()`를 통해 역정렬을 할 수 있다.
    * `students.sort(comparing(Student::getGrade).reversed());`
    * `sort()` 먼저 실행 후 `reversed()`가 실행되는 파이프라인을 가짐.

## Predicate 조합
### negate() 디폴트 메소드를 통한 boolean 타입 역전
* 빨강사과에서 negate()를 통해 boolean 반전을 시킬 수 있다.
  ```java
  //case1 : negate()를 쓰면 boolean 타입이 반대가 된다 (true -> false, false -> true)
  Predicate<Student> boy = student -> student.getGender().equals(Gender.Male);
  Predicate<Student> girl = boy.negate();
  ```
### and()와 or()을 통한 추가 조건 걸기
* 기존 조건에서 `and()`, `or()`를 통해 추가 조건을 걸 수 있다.
  ```java
  // case2 : 90점 이상인 남학생 
  Predicate<Student> smartBoy = boy.and(student -> student.getGrade() >= 90);
  // 90점 이상인 여학생 이거나, 남학생
  Predicate<Student> boyOrSmartGirl = girl.and(student -> student.getGrade() > 90)
             .or(student -> student.getGender().equals(Gender.Male));
  ```

## Function 조합
### andThen()을 통한 순차적 파이프라인.
* case1: `andThen()` : 주어진 함수를 먼저 적용한 결과를 다른 함수의 입력으로 전달하도록 반환.
  ```java
  //case1 : andThen()를 쓰면 앞에꺼 실행 후 결과를 뒤에꺼에 넣음.
  Function<Integer, Integer> f = x -> x + 1;
  Function<Integer, Integer> g = x -> x * 2;
  
  // f 먼저 실행 후 g 실행
  Function<Integer, Integer> h = f.andThen(g);
  // 4 반환
  int result = h.apply(1);
  ```
  
### compose()
* case2: compose() : 인수로 주어진 함수를 먼저 실행한 후 그 결과를 외부 함수의 인수로 제공.
  ```java
  //case2:  인수로 주어진 함수를 먼저 실행 후 결과를 외부 함수의 인수로 제공
  Function<Integer, Integer> f2 = x -> x + 1;
  Function<Integer, Integer> g2 = x -> x * 2;
    
  //g 먼저 실행 후 f 실행
  Function<Integer, Integer> h2 = f.compose(g);
  //3 반환
  int result2 = h2.apply(1);
  ```


## 요약
* 람다 표현식은 익명함수의 일종!
    * **메소드 명이 없으며 `파라미터 리스트`, `바디`, `반환 형식`을 가지며 `예외`를 던질 수 있다.**
* **`함수형 인터페이스`는 하나의 추상 메소드만을 정의하는 인터페이스**
    * 오직 함수형 인터페이스의 추상 메소드(익명 함수)만 람다 표현식으로 대체할 수 있다.
    * **람다 표현식 전체가 함수형 인터페이스의 인스턴스토 취급된다.**

### 참고 자료
* 모던 자바 인 액션
* JAVA Reference